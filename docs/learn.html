<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprender - Data Engineering Hub</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/learn.css">
</head>
<body class="learn-page">
    <!-- Header con progreso -->
    <header class="learn-header">
        <div class="container-fluid">
            <div class="header-content">
                <button onclick="goBack()" class="btn-back">← Salir</button>
                <div class="progress-info">
                    <span class="exercise-number" id="exercise-number">1/10</span>
                    <h1 id="exercise-title">Cargando...</h1>
                </div>
                <button onclick="nextExercise()" class="btn-next-ex">Siguiente →</button>
            </div>
            <div class="progress-bar-track">
                <div class="progress-bar-fill" id="progress-bar-fill" style="width: 10%"></div>
            </div>
        </div>
    </header>

    <!-- Main: Layout estilo DataCamp -->
    <main class="learn-layout">
        <!-- PANEL IZQUIERDO: Teoría e Instrucciones -->
        <aside class="theory-panel">
            <div class="panel-content">
                <!-- Instrucción -->
                <section class="instruction-section">
                    <h2>📋 Instrucción</h2>
                    <p id="instruction-text">Cargando instrucción...</p>
                </section>

                <!-- Teoría -->
                <section class="theory-section">
                    <h3>📚 Teoría</h3>
                    <div id="theory-content">
                        <p id="theory-description"></p>

                        <div class="syntax-box">
                            <strong>Sintaxis:</strong>
                            <code id="syntax-code"></code>
                        </div>
                    </div>
                </section>

                <!-- Ejemplo -->
                <section class="example-section">
                    <h3>📝 Ejemplo</h3>
                    <div class="example-box">
                        <pre id="example-code"></pre>
                    </div>
                    <p class="example-explanation" id="example-explanation"></p>
                </section>

                <!-- Hints -->
                <section class="hints-section">
                    <h3>💡 Pistas (<span id="hints-count">3</span> disponibles)</h3>
                    <div id="hints-container">
                        <!-- Hints will be revealed here -->
                    </div>
                    <button onclick="revealHint()" class="btn-hint" id="btn-reveal-hint">
                        🔓 Revelar pista
                    </button>
                </section>
            </div>
        </aside>

        <!-- PANEL DERECHO: Editor + Consola -->
        <div class="editor-panel">
            <!-- Editor -->
            <div class="editor-section">
                <div class="editor-header">
                    <span>💻 Editor de Código</span>
                    <button onclick="resetCode()" class="btn-reset">🔄 Reset</button>
                </div>
                <div id="code-editor" class="code-editor"></div>
            </div>

            <!-- Botones de acción -->
            <div class="actions-bar">
                <button onclick="runCode()" class="btn-run">
                    ▶️ Ejecutar
                </button>
                <button onclick="submitSolution()" class="btn-submit">
                    ✅ Submit
                </button>
            </div>

            <!-- Consola -->
            <div class="console-section">
                <div class="console-header">
                    <span>📟 Consola</span>
                    <button onclick="clearConsole()" class="btn-clear">Limpiar</button>
                </div>
                <div id="console-output" class="console-output">
                    <div class="console-placeholder">
                        Ejecuta tu código para ver la salida aquí...
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal de Éxito -->
    <div id="success-modal" class="modal" style="display: none;">
        <div class="modal-content success-modal">
            <div class="success-animation">🎉</div>
            <h2>¡Correcto!</h2>
            <p id="success-message">Has completado este ejercicio.</p>
            <div class="modal-actions">
                <button onclick="closeSuccessModal()" class="btn-secondary">Revisar</button>
                <button onclick="nextExercise()" class="btn-primary">Siguiente Ejercicio →</button>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <div id="loading-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="loader"></div>
            <p>Ejecutando...</p>
        </div>
    </div>

    <!-- Monaco Editor -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    <script src="js/learn.js"></script>
</body>
</html>
