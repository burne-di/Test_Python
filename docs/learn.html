<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprender - Data Engineering Hub</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/learn.css">
</head>
<body class="learn-page">
    <!-- Header con progreso -->
    <header class="learn-header">
        <div class="container-fluid">
            <div class="header-content">
                <div class="nav-buttons-left">
                    <button onclick="previousExercise()" class="btn-back" id="btn-previous" title="Ejercicio anterior">
                        â† Anterior
                    </button>
                    <button onclick="goToHome()" class="btn-home" title="Volver al inicio">
                        ğŸ  Inicio
                    </button>
                </div>
                <div class="progress-info">
                    <span class="exercise-number" id="exercise-number">1/10</span>
                    <h1 id="exercise-title">Cargando...</h1>
                </div>
                <button onclick="nextExercise()" class="btn-next-ex" id="btn-next">Siguiente â†’</button>
            </div>
            <div class="progress-bar-track">
                <div class="progress-bar-fill" id="progress-bar-fill" style="width: 10%"></div>
            </div>
        </div>
    </header>

    <!-- Main: Layout estilo DataCamp -->
    <main class="learn-layout">
        <!-- PANEL IZQUIERDO: TeorÃ­a e Instrucciones -->
        <aside class="theory-panel">
            <div class="panel-content">
                <!-- InstrucciÃ³n -->
                <section class="instruction-section">
                    <h2>ğŸ“‹ InstrucciÃ³n</h2>
                    <p id="instruction-text">Cargando instrucciÃ³n...</p>
                </section>

                <!-- TeorÃ­a -->
                <section class="theory-section">
                    <h3>ğŸ“š TeorÃ­a</h3>
                    <div id="theory-content">
                        <p id="theory-description"></p>

                        <div class="syntax-box">
                            <strong>Sintaxis:</strong>
                            <code id="syntax-code"></code>
                        </div>
                    </div>
                </section>

                <!-- Ejemplo -->
                <section class="example-section">
                    <h3>ğŸ“ Ejemplo</h3>
                    <div class="example-box">
                        <pre id="example-code"></pre>
                    </div>
                    <p class="example-explanation" id="example-explanation"></p>
                </section>

                <!-- Hints -->
                <section class="hints-section">
                    <h3>ğŸ’¡ Pistas (<span id="hints-count">3</span> disponibles)</h3>
                    <div id="hints-container">
                        <!-- Hints will be revealed here -->
                    </div>
                    <button onclick="revealHint()" class="btn-hint" id="btn-reveal-hint">
                        ğŸ”“ Revelar pista
                    </button>
                </section>
            </div>
        </aside>

        <!-- PANEL DERECHO: Editor + Consola -->
        <div class="editor-panel">
            <!-- Editor -->
            <div class="editor-section">
                <div class="editor-header">
                    <span>ğŸ’» Editor de CÃ³digo</span>
                    <button onclick="resetCode()" class="btn-reset">ğŸ”„ Reset</button>
                </div>
                <div id="code-editor" class="code-editor"></div>
            </div>

            <!-- Botones de acciÃ³n -->
            <div class="actions-bar">
                <button onclick="runCode()" class="btn-run">
                    â–¶ï¸ Ejecutar
                </button>
                <button onclick="submitSolution()" class="btn-submit">
                    âœ… Submit
                </button>
                <button onclick="testProgressSave()" class="btn-debug" style="background: #f59e0b;" title="Probar guardado de progreso">
                    ğŸ§ª Test Guardado
                </button>
                <button onclick="checkSavedProgress()" class="btn-debug" style="background: #8b5cf6;" title="Ver progreso guardado">
                    ğŸ“Š Ver Progreso
                </button>
            </div>

            <!-- Consola -->
            <div class="console-section">
                <div class="console-header">
                    <span>ğŸ“Ÿ Consola</span>
                    <button onclick="clearConsole()" class="btn-clear">Limpiar</button>
                </div>
                <div id="console-output" class="console-output">
                    <div class="console-placeholder">
                        Ejecuta tu cÃ³digo para ver la salida aquÃ­...
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal de Ã‰xito -->
    <div id="success-modal" class="modal" style="display: none;">
        <div class="modal-content success-modal">
            <div class="success-animation">ğŸ‰</div>
            <h2>Â¡Correcto!</h2>
            <p id="success-message">Has completado este ejercicio.</p>
            <div class="modal-actions">
                <button onclick="closeSuccessModal()" class="btn-secondary">Revisar</button>
                <button onclick="nextExercise()" class="btn-primary">Siguiente Ejercicio â†’</button>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <div id="loading-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="loader"></div>
            <p>Ejecutando...</p>
        </div>
    </div>

    <!-- Monaco Editor -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    <script src="js/progress.js"></script>
    <script src="js/learn.js"></script>
</body>
</html>
