<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprender - Data Engineering Hub</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/learn.css">
</head>
<body class="learn-page">
    <header class="learn-header">
        <div class="container">
            <div class="header-top">
                <button onclick="goBack()" class="back-button">â† Volver</button>
                <h1 id="exercise-title">Cargando...</h1>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
                <span class="progress-text" id="progress-text">Paso 1 de 4</span>
            </div>
        </div>
    </header>

    <main class="learn-container">
        <!-- STEP 1: THEORY -->
        <div class="step-container" id="step-theory" style="display: block;">
            <div class="step-header">
                <span class="step-badge">ğŸ“š Paso 1: TeorÃ­a</span>
                <h2 id="theory-title">Concepto</h2>
            </div>

            <div class="theory-content">
                <div class="theory-card">
                    <h3>Â¿QuÃ© es?</h3>
                    <p id="theory-description"></p>
                </div>

                <div class="theory-card">
                    <h3>Â¿CuÃ¡ndo usarlo?</h3>
                    <ul id="theory-when-to-use"></ul>
                </div>

                <div class="theory-card syntax-card">
                    <h3>Sintaxis</h3>
                    <div class="code-block">
                        <code id="theory-syntax"></code>
                    </div>
                    <div class="syntax-components" id="syntax-components"></div>
                </div>

                <div class="performance-note" id="performance-note" style="display: none;">
                    <span class="note-icon">âš¡</span>
                    <span id="performance-text"></span>
                </div>
            </div>

            <div class="step-actions">
                <button onclick="nextStep()" class="btn-next">
                    Siguiente: Ver Ejemplos â†’
                </button>
            </div>
        </div>

        <!-- STEP 2: EXAMPLES -->
        <div class="step-container" id="step-examples" style="display: none;">
            <div class="step-header">
                <span class="step-badge">ğŸ“ Paso 2: Ejemplos</span>
                <h2>Ejemplos PrÃ¡cticos</h2>
            </div>

            <div class="examples-content" id="examples-content">
                <!-- Examples will be loaded here -->
            </div>

            <div class="step-actions">
                <button onclick="prevStep()" class="btn-secondary">â† Anterior</button>
                <button onclick="nextStep()" class="btn-next">Siguiente: Casos de Uso â†’</button>
            </div>
        </div>

        <!-- STEP 3: USE CASES -->
        <div class="step-container" id="step-use-cases" style="display: none;">
            <div class="step-header">
                <span class="step-badge">ğŸ’¼ Paso 3: Casos de Uso</span>
                <h2>Â¿DÃ³nde se usa en Data Engineering?</h2>
            </div>

            <div class="use-cases-content" id="use-cases-content">
                <!-- Use cases will be loaded here -->
            </div>

            <div class="step-actions">
                <button onclick="prevStep()" class="btn-secondary">â† Anterior</button>
                <button onclick="nextStep()" class="btn-next">Siguiente: Practicar â†’</button>
            </div>
        </div>

        <!-- STEP 4: PRACTICE -->
        <div class="step-container" id="step-practice" style="display: none;">
            <div class="step-header">
                <span class="step-badge">âœï¸ Paso 4: PrÃ¡ctica</span>
                <h2>Ahora tÃº: Resuelve el ejercicio</h2>
            </div>

            <div class="practice-layout">
                <div class="practice-left">
                    <div class="instruction-box">
                        <h3>ğŸ“‹ InstrucciÃ³n</h3>
                        <p id="practice-instruction"></p>
                    </div>

                    <div class="hints-box">
                        <h3>ğŸ’¡ Pistas (<span id="hints-available">3</span> disponibles)</h3>
                        <div id="hints-list"></div>
                        <button onclick="revealHint()" class="btn-hint" id="btn-reveal-hint">
                            ğŸ”“ Revelar pista
                        </button>
                    </div>

                    <div class="test-cases-box">
                        <h3>âœ“ Casos de prueba</h3>
                        <div id="test-cases-preview"></div>
                    </div>
                </div>

                <div class="practice-right">
                    <div class="editor-section">
                        <div class="editor-header">
                            <h3>Editor de CÃ³digo</h3>
                            <div class="editor-controls">
                                <button onclick="resetCode()" class="btn-secondary">ğŸ”„ Reset</button>
                                <button onclick="runCode()" class="btn-primary">â–¶ï¸ Ejecutar</button>
                                <button onclick="submitCode()" class="btn-success" id="btn-submit">âœ“ Enviar SoluciÃ³n</button>
                            </div>
                        </div>
                        <div id="code-editor" class="code-editor-container"></div>
                    </div>

                    <div class="output-section">
                        <div class="tabs">
                            <button class="tab active" onclick="switchOutputTab('output')">Salida</button>
                            <button class="tab" onclick="switchOutputTab('tests')">Tests</button>
                        </div>
                        <div id="output-content" class="output-content">
                            <div class="placeholder">
                                Ejecuta tu cÃ³digo para ver los resultados
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="step-actions">
                <button onclick="prevStep()" class="btn-secondary">â† Anterior</button>
            </div>
        </div>
    </main>

    <!-- Success Modal -->
    <div id="success-modal" class="modal" style="display: none;">
        <div class="modal-content success-modal">
            <div class="success-icon">ğŸ‰</div>
            <h2>Â¡Excelente trabajo!</h2>
            <p>Has completado este ejercicio correctamente.</p>
            <div class="success-stats">
                <div class="stat">
                    <span class="stat-label">Tiempo</span>
                    <span class="stat-value" id="completion-time">5:30</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Intentos</span>
                    <span class="stat-value" id="attempts-count">2</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Pistas usadas</span>
                    <span class="stat-value" id="hints-used">1</span>
                </div>
            </div>
            <div class="modal-actions">
                <button onclick="closeSuccessModal()" class="btn-secondary">Revisar CÃ³digo</button>
                <button onclick="goToNextExercise()" class="btn-primary">Siguiente Ejercicio â†’</button>
                <button onclick="goBack()" class="btn-secondary">Volver al Inicio</button>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <div id="loading-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="loader"></div>
            <p>Ejecutando cÃ³digo...</p>
        </div>
    </div>

    <!-- Monaco Editor -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    <script src="js/learn.js"></script>
</body>
</html>
